<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ritual Quiz Challenge</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
    margin:0;
    font-family:'Poppins', Arial, sans-serif;
    background:#09120F;
    color:#E8F3F0;
    text-align:center;
    overflow-x:hidden;
}
h2,h3,h4 { font-weight:600; margin:10px 0;}
#intro h2 { font-size:36px; margin-bottom:20px; }
#introMain,#letsFindOut { font-size:26px; opacity:0; margin-bottom:10px; }
#startBtn { margin-top:30px; padding:16px 32px; background:#143D33; color:white; font-size:22px; border:none; border-radius:12px; cursor:pointer; opacity:0; display:inline-block; pointer-events:none; }

.quiz-container { display:none; margin-top:50px; }
#emojiTop { font-size:42px; margin-bottom:12px; opacity:0; transition: opacity 2s; font-weight:600;}
.question { font-size:22px; margin-bottom:15px; }
.option { background:#0F1D19; border:1px solid #1B4F42; padding:14px; margin:10px auto; width:80%; border-radius:10px; cursor:pointer; transition:0.3s transform,0.3s background; font-size:20px; font-weight:500; }
.option:hover { background:#143D33; transform:scale(1.05); }
.correct { background:#143D33 !important; border-color:#29FFBF; }
.wrong { background:#3D0F0F !important; border-color:#FF4F4F; }
#nextBtn,#retakeBtn { background:#143D33; color:white; padding:14px 28px; border:none; border-radius:10px; cursor:pointer; font-size:20px; margin-top:20px; display:none; transition:0.3s; }
#nextBtn:hover,#retakeBtn:hover { background:#1B4F42; }
#progressContainer, #resultProgressContainer { width:80%; height:20px; background:#1B4F42; margin:0 auto 20px; border-radius:12px; }
#progressBar, #resultProgressBar { height:100%; width:0%; background:linear-gradient(90deg,#29FFBF,#14D9A2); border-radius:12px; transition: width 1s ease-in-out; }
#emojiResult { font-size:80px; margin-top:20px; animation:bounceEmoji 1s ease; }
@keyframes bounceEmoji {0%{transform:scale(0);}50%{transform:scale(1.2);}70%{transform:scale(0.9);}100%{transform:scale(1);}}
a { color:#29FFBF; text-decoration:none; font-size:14px; margin-top:40px; display:block; }
#confettiCanvas { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999; }
</style>
</head>
<body>

<canvas id="confettiCanvas"></canvas>

<div id="intro">
    <h2>‚ùñ Ritual Quiz</h2>
    <h3 id="introMain">How Ritual Aligned Are You?</h3>
    <h4 id="letsFindOut">Let's Find Out</h4>
    <button id="startBtn">Begin Quiz</button>
</div>

<div class="quiz-container" id="quiz">
    <div id="emojiTop">‚ùñ Ritual</div>
    <div id="progressContainer"><div id="progressBar"></div></div>
    <div class="question" id="questionText"></div>
    <div id="optionsContainer"></div>
    <button id="nextBtn">Next</button>
</div>

<div class="quiz-container" id="resultScreen">
    <div id="emojiTop">‚ùñ Ritual</div>
    <h2>Your Score:</h2>
    <div id="emojiResult"></div>
    <div id="scorePercent"></div>
    <div id="resultProgressContainer"><div id="resultProgressBar"></div></div>
    <div id="evaluationText" style="margin-top:20px; font-size:20px;"></div>
    <button id="retakeBtn">Retake Quiz</button>
</div>

<a href="https://x.com/THE_REAL_BIG4L?t=PYvu1HEe6mb-MVMpn7_3HQ&s=09" target="_blank">Built by THE_REAL_BIG4L</a>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
// Full 60+ questions array (replace with your full set)
const questions=[
{q:"What is the transaction mechanism of Resonance?", a:["‚ùñ Surplus-maximizing fee","‚ùñ Standard fee","‚ùñ Gas-free","‚ùñ PoS reward"], correct:"‚ùñ Surplus-maximizing fee"},
{q:"Which innovation allows Symphony consensus?", a:["‚ùñ Dual proof sharding","‚ùñ PoW mining","‚ùñ Single chain validation","‚ùñ Randomized committees"], correct:"‚ùñ Dual proof sharding"},
{q:"Which feature allows Scheduled Transactions without external keepers?", a:["‚ùñ Eliminates need for external keepers","‚ùñ Gas fees","‚ùñ User input","‚ùñ Smart contract calls"], correct:"‚ùñ Eliminates need for external keepers"},
// ‚Ä¶ add all 60+ questions here
];

// Fixed mascot question
const fixedQuestion={q:"What is Ritual mascot?", a:["‚ùñ SIGGY","‚ùñ RITZY","‚ùñ NODESTER","‚ùñ CHAINO"], correct:"‚ùñ SIGGY"};

function shuffleArray(arr){ return arr.sort(()=>Math.random()-0.5); }

let usedQuestions=new Set(); // track already used questions in session
let currentQ=0, score=0, roundQuestions=[];
const startBtn=document.getElementById('startBtn');
const intro=document.getElementById('intro');
const introMain=document.getElementById('introMain');
const letsFindOut=document.getElementById('letsFindOut');
const quiz=document.getElementById('quiz');
const questionText=document.getElementById('questionText');
const optionsContainer=document.getElementById('optionsContainer');
const nextBtn=document.getElementById('nextBtn');
const resultScreen=document.getElementById('resultScreen');
const emojiResult=document.getElementById('emojiResult');
const scorePercent=document.getElementById('scorePercent');
const retakeBtn=document.getElementById('retakeBtn');
const progressBar=document.getElementById('progressBar');
const resultProgressBar=document.getElementById('resultProgressBar');
const evaluationText=document.getElementById('evaluationText');
const confettiCanvas=document.getElementById('confettiCanvas');

window.onload = () => {
    setTimeout(()=>{ introMain.style.transition="opacity 2.5s"; introMain.style.opacity=1; }, 500);
    setTimeout(()=>{ letsFindOut.style.transition="opacity 2.5s"; letsFindOut.style.opacity=1; }, 3000);
    setTimeout(()=>{
        startBtn.style.transition="opacity 2.5s";
        startBtn.style.opacity=1;
        startBtn.style.pointerEvents='auto';
    }, 6000);
};

startBtn.addEventListener('click', startQuiz);
retakeBtn.addEventListener('click', startQuiz);

// --- PICK ROUND QUESTIONS FUNCTION ---
function pickRoundQuestions(){
    // Filter out already used questions
    let available = questions.filter(q=>!usedQuestions.has(q.q));
    if(available.length < 10) { usedQuestions.clear(); available = [...questions]; }
    const shuffled = shuffleArray(available);
    const round = shuffled.slice(0,10);
    round.push(fixedQuestion);
    round.forEach(q=>usedQuestions.add(q.q));
    return shuffleArray(round.map(q=>{
        q.a=shuffleArray([...q.a]);
        return q;
    }));
}

// --- QUIZ FUNCTIONS ---
function startQuiz(){
    intro.style.display='none';
    resultScreen.style.display='none';
    quiz.style.display='block';
    currentQ=0;
    score=0;
    roundQuestions=pickRoundQuestions();
    showQuestion();
    document.getElementById('emojiTop').style.opacity=1;
}

function showQuestion(){
    nextBtn.style.display='none';
    const q=roundQuestions[currentQ];
    questionText.textContent=q.q;
    optionsContainer.innerHTML='';
    progressBar.style.width=(currentQ/roundQuestions.length*100)+'%';
    q.a.forEach(opt=>{
        const btn=document.createElement('div');
        btn.className='option';
        btn.textContent=opt;
        btn.addEventListener('click',()=>selectAnswer(btn,q.correct));
        optionsContainer.appendChild(btn);
    });
}

function selectAnswer(btn,correct){
    const buttons=document.querySelectorAll('.option');
    buttons.forEach(b=>b.style.pointerEvents='none');
    if(btn.textContent===correct){ score++; btn.textContent+=" ‚úÖ Correct"; btn.classList.add('correct'); }
    else{ btn.textContent+=` ‚ùå Wrong, Correct: ${correct}`; btn.classList.add('wrong'); buttons.forEach(b=>{ if(b.textContent===correct) b.classList.add('correct'); }); }
    nextBtn.style.display='inline-block';
}

nextBtn.addEventListener('click',()=>{
    currentQ++;
    if(currentQ<roundQuestions.length) showQuestion();
    else showResult();
});

function showResult(){
    quiz.style.display='none';
    resultScreen.style.display='block';
    let percent=Math.round(score/roundQuestions.length*100);
    scorePercent.textContent=percent+"%";
    resultProgressBar.style.width='0%';
    setTimeout(()=>{ resultProgressBar.style.width=percent+'%'; },100);

    if(percent>=80) emojiResult.textContent='üòÑ';
    else if(percent>=50) emojiResult.textContent='üòê';
    else emojiResult.textContent='üòû';

    if(percent>=80) evaluationText.textContent=`Gritual, you are truly Ritual aligned!`;
    else if(percent>=50) evaluationText.textContent=`Gritual, you are decently Ritual aligned.`;
    else evaluationText.textContent=`Gritual, you need to do better to align with Ritual.`;

    retakeBtn.style.display='inline-block';
    launchConfetti();
}

// Confetti function
function launchConfetti(){
    const duration = 3000;
    const end = Date.now() + duration;
    const myConfetti = confetti.create(confettiCanvas, {resize:true, useWorker:true});
    (function frame(){
        myConfetti({
            particleCount:3,
            angle:60,
            spread:55,
            origin:{x:0},
            colors:['#29FFBF','#14D9A2','#FFFFFF']
        });
        myConfetti({
            particleCount:3,
            angle:120,
            spread:55,
            origin:{x:1},
            colors:['#29FFBF','#14D9A2','#FFFFFF']
        });
        if(Date.now()<end) requestAnimationFrame(frame);
    }());
}
</script>
</body>
</html>
